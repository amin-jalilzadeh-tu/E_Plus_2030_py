
we have this excel file that we cretae the lookup py files from it. 
user can drag and drop there own excel file and we will create the lookup py files from it. it will be overridden. 
it can be on memory or permenetly saved. 

this excel file aalso, should be abled to be modified by the results from calibration.



├── lookup_xlx
│   ├── dhw_lookup.xlsx
│   ├── elec_schedules.xlsx
│   ├── epw_lookup.xlsx
│   ├── geometry_lookup.xlsx
│   ├── groundtemp_lookup.xlsx
│   ├── hvac_lookup.xlsx
│   ├── lighting_lookup.xlsx
│   ├── materials.xlsx
│   └── ventilation_lookup_data.xlsx

here we have user configs that we receive from the user interface and will be saved here, and code will lookup for this,
 and if it is here, it will be used and override over lookups.    

├── user_configs
│   ├── dhw_lookup.xlsx
│   ├── elec_schedules.xlsx
│   ├── epw_lookup.xlsx
│   ├── geometry_lookup.xlsx
│   ├── groundtemp_lookup.xlsx
│   ├── hvac_lookup.xlsx
│   ├── lighting_lookup.xlsx
│   ├── materials.xlsx
│   └── ventilation_lookup_data.xlsx



from database pgsql, it will be connected and saved as datafarame, for now we have csv files for test. 


├── df_buildings.csv
├── df_focus.csv
├── df_trees.csv








├── main.py
│   └── Imports:
│       │   os
│       │   logging
│           pandas
│   └── From Imports:
│       │   from geomeppy import IDF
│       │   from geomz.building import create_building_with_roof_type
│       │   from geomz.geometry_overrides_from_excel import read_geometry_overrides_excel
│       │   from fenez.fenestration import add_fenestration
│       │   from fenez.materials import update_construction_materials
│       │   from fenez.materials import assign_constructions_to_surfaces
│       │   from fenez.dict_override_excel import override_dictionaries_from_excel
│       │   from Elec.lighting import add_lights_and_parasitics
│       │   from Elec.lighting_lookup import lighting_lookup
│       │   from Elec.lighting_overrides_from_excel import read_lighting_overrides_from_excel
│       │   from Elec.lighting_overrides_from_excel import apply_lighting_overrides_to_lookup
│       │   from DHW.water_heater import add_dhw_to_idf
│       │   from DHW.dhw_lookup import dhw_lookup
│       │   from DHW import dhw_lookup
│       │   from DHW.dhw_overrides_from_excel import override_dhw_lookup_from_excel
│       │   from HVAC.custom_hvac import add_HVAC_Ideal_to_all_zones
│       │   from HVAC.hvac_lookup import hvac_lookup
│       │   from HVAC.hvac_overrides_from_excel import read_hvac_overrides_from_excel
│       │   from HVAC.hvac_overrides_from_excel import apply_hvac_overrides_to_lookup
│       │   from ventilation.add_ventilation import add_ventilation_to_idf
│       │   from ventilation.ventilation_lookup import ventilation_lookup
│       │   from ventilation.ventilation_overrides_from_excel import read_ventilation_overrides_from_excel
│       │   from ventilation.ventilation_overrides_from_excel import apply_ventilation_overrides_to_lookup
│       │   from setzone.add_outdoor_air_and_zone_sizing_to_all_zones import add_outdoor_air_and_zone_sizing_to_all_zones
│       │   from tempground.add_ground_temperatures import add_ground_temperatures
│       │   from outputdef.assign_output_settings import assign_output_settings
│       │   from outputdef.add_output_definitions import add_output_definitions
│       │   from postproc.merge_results import merge_all_results
│       │   from other.zonelist import create_zonelist
│       │   from epw.run_epw_sims import simulate_all
│       │   from epw.epw_lookup import epw_lookup
│       │   from epw.epw_overrides_from_excel import read_epw_overrides_from_excel
│       │   from epw.epw_overrides_from_excel import apply_epw_overrides_to_lookup
│       │   from fenez.data_materials_residential import residential_materials_data
│       │   from fenez.data_materials_non_residential import non_residential_materials_data
│           from shading.shading import add_shading_to_idf
│   └── Functions:
│       │   create_idf_for_building
│           main
│   └── CSV Inputs:
│       │   df_focus.csv
│       │   df_trees.csv
│           df_buildings.csv
│   └── CSV Outputs:
│       │   output/assigned/assigned_geometry.csv
│       │   output/assigned/assigned_lighting.csv
│       │   output/assigned/assigned_dhw_params.csv
│       │   output/assigned/assigned_hvac_params.csv
│       │   output/assigned/assigned_ventilation.csv
│       │   output/assigned/assigned_epw_paths.csv
│       │   output/assigned/assigned_ground_temps.csv
│           output/assigned/assigned_setzone_params.csv





├── DHW
.....
├── Elec
.....
├── epw
.....
├── fenez
.....
├── geomz
.....
├── HVAC
.....
├── other
.....
├── postproc
.....
├── setzone
.....
├── shading
.....
├── tempground
.....
├── ventilation
.....
├── outputdef
.....





├── output
│   ├── assigned
│   │   ├── assigned_dhw_params.csv
│   │   ├── assigned_geometry.csv
│   │   ├── assigned_hvac_building.csv
│   │   ├── assigned_hvac_zones.csv
│   │   ├── assigned_lighting.csv
│   │   ├── assigned_setzone_params.csv
│   │   ├── assigned_vent_building.csv
│   │   ├── assigned_vent_zones.csv
│   │   ├── structured_fenez_params.csv
│   │   └── Structuring_assigns.ipynb
│   ├── output_IDFs
│   │   ├── building_0.idf
│   │   ├── building_0_85344a.idf
│   │   ├── building_1.idf
│   │   └── building_1_37cb48.idf
│   ├── results
│   │   ├── master_parameters.csv
│   │   ├── master_parameters_mock.csv
│   │   ├── merged_as_is.csv
│   │   ├── merged_daily_mean.csv
│   │   ├── merged_daily_mean_mocked.csv
│   │   └── mock_merged_daily_mean.csv
│   ├── Sim_Results
│   │   └── 2020.0
│   │       ├── simulation_bldg0.audit
│   │       ├── simulation_bldg0.bnd
│   │       ├── simulation_bldg0.csv
│   │       ............
│   │       ├── simulation_bldg1Table.htm
│   │       └── simulation_bldg1Zsz.csv
│   ├── master_parameters_mock.csv












part 2: validation


├── validation
│   ├── __pycache__
│   │   ├── compare_sims_with_measured.cpython-39.pyc
│   │   ├── metrics.cpython-39.pyc
│   │   ├── validate_results.cpython-39.pyc
│   │   ├── validate_results_custom.cpython-39.pyc
│   │   └── visualize.cpython-39.pyc
│   ├── compare_sims_with_measured.py
│   │   └── Imports:
│   │           pandas
│   │   └── Functions:
│   │       │   load_csv_as_df
│   │           align_data_for_variable
│   ├── main.py
│   │   └── Imports:
│   │       │   matplotlib.pyplot
│   │           csv
│   │   └── From Imports:
│   │           from validation.validate_results_custom import validate_with_ranges
│   │   └── Functions:
│   │       │   main
│   │           bar_chart_metrics_for_triple
│   ├── metrics.py
│   │   └── Imports:
│   │           numpy
│   │   └── Functions:
│   │       │   mean_bias_error
│   │       │   cv_rmse
│   │           nmbe
│   ├── validate_results.py
│   │   └── Imports:
│   │       │   os
│   │           pandas
│   │   └── From Imports:
│   │       │   from validation.compare_sims_with_measured import load_csv_as_df
│   │       │   from validation.compare_sims_with_measured import align_data_for_variable
│   │       │   from validation.metrics import mean_bias_error
│   │       │   from validation.metrics import cv_rmse
│   │       │   from validation.metrics import nmbe
│   │       │   from validation.visualize import plot_time_series_comparison
│   │       │   from validation.visualize import scatter_plot_comparison
│   │           from validation.visualize import bar_chart_metrics
│   │   └── Functions:
│   │       │   validate_data
│   │       │   save_metrics_to_csv
│   │           check_for_calibration
│   ├── validate_results_custom.py
│   │   └── Imports:
│   │           pandas
│   │   └── From Imports:
│   │       │   from validation.compare_sims_with_measured import load_csv_as_df
│   │       │   from validation.compare_sims_with_measured import align_data_for_variable
│   │       │   from validation.metrics import mean_bias_error
│   │       │   from validation.metrics import cv_rmse
│   │       │   from validation.metrics import nmbe
│   │       │   from validation.visualize import plot_time_series_comparison
│   │           from validation.visualize import scatter_plot_comparison
│   │   └── Functions:
│   │           validate_with_ranges
│   └── visualize.py
│       └── Imports:
│           │   matplotlib.pyplot
│               numpy
│       └── Functions:
│           │   plot_time_series_comparison
│           │   scatter_plot_comparison
│               bar_chart_metrics



├── validation_report.csv









part 3: modification idf files from base file

├── modification
│   ├── aaaaaaaaaaa1.py
│   │   └── Imports:
│   │       │   itertools
│   │       │   random
│   │       │   numpy
│   │       │   pandas
│   │           pyDOE2
│   │   └── From Imports:
│   │       │   from typing import List
│   │       │   from typing import Dict
│   │           from typing import Union
│   │   └── Functions:
│   │       │   define_parameter_space
│   │       │   generate_full_factorial
│   │       │   generate_random_sampling
│   │       │   generate_latin_hypercube
│   │           generate_initial_configurations
│   ├── common_utils.py
│   │   └── Imports:
│   │       │   os
│   │       │   random
│   │           pandas
│   │   └── From Imports:
│   │           from eppy.modeleditor import IDF
│   │   └── Functions:
│   │       │   load_assigned_csv
│   │       │   filter_for_building
│   │       │   to_float_or_none
│   │       │   pick_value_in_range
│   │       │   define_building_param_strategy
│   │       │   generate_multiple_param_sets
│   │       │   save_param_scenarios_to_csv
│   │       │   load_idf
│   │       │   save_idf
│   │           load_scenario_csv
│   ├── dhw_functions.py
│   │   └── From Imports:
│   │           from eppy.modeleditor import IDF
│   │   └── Functions:
│   │       │   apply_dhw_params_to_idf
│   │           _create_or_update_dhw_schedules
│   ├── elec_functions.py
│   │   └── Imports:
│   │           math
│   │   └── Functions:
│   │       │   apply_building_level_elec
│   │       │   _create_or_update_lights_object
│   │       │   _create_or_update_equip_object
│   │       │   apply_object_level_elec
│   │       │   _update_generic_lights_obj
│   │           _update_generic_equip_obj
│   ├── fenez_functions.py
│   │   └── Imports:
│   │       │   pandas
│   │       │   math
│   │           random
│   │   └── Functions:
│   │       │   apply_object_level_fenez
│   │       │   _get_or_create_idf_object
│   │       │   _map_param_to_idf_field
│   │           _handle_rvalue_or_uvalue
│   ├── fenez_functions2.py
│   │   └── Imports:
│   │           pandas
│   │   └── From Imports:
│   │       │   from fenez.materials import update_construction_materials
│   │       │   from fenez.materials import assign_constructions_to_surfaces
│   │           from fenez.fenestration import add_fenestration
│   │   └── Functions:
│   │       │   apply_building_level_fenez
│   │       │   apply_object_level_fenez
│   │           _match_field_name
│   ├── hvac_functions.py
│   │   └── From Imports:
│   │           from eppy.modeleditor import IDF
│   │   └── Functions:
│   │       │   apply_building_level_hvac
│   │       │   _modify_schedule_compact
│   │       │   _set_ideal_loads_supply_temps_all_zones
│   │           apply_zone_level_hvac
│   ├── main_modifi.py
│   │   └── Imports:
│   │       │   os
│   │       │   pandas
│   │           random
│   │   └── From Imports:
│   │       │   from common_utils import load_assigned_csv
│   │       │   from common_utils import load_scenario_csv
│   │       │   from common_utils import load_idf
│   │       │   from common_utils import save_idf
│   │       │   from common_utils import generate_multiple_param_sets
│   │       │   from common_utils import save_param_scenarios_to_csv
│   │       │   from hvac_functions import apply_building_level_hvac
│   │       │   from hvac_functions import apply_zone_level_hvac
│   │       │   from dhw_functions import apply_dhw_params_to_idf
│   │       │   from vent_functions import apply_building_level_vent
│   │       │   from vent_functions import apply_zone_level_vent
│   │           from fenez_functions import apply_object_level_fenez
│   │   └── Functions:
│   │           main
│   └── vent_functions.py
│       └── Imports:
│               random
│       └── Functions:
│           │   apply_building_level_vent
│           │   _create_or_update_infiltration
│           │   _create_or_update_ventilation
│           │   _attach_vent_to_ideal_loads
│           │   apply_zone_level_vent
│               _create_zone_level_object









├── output

│   ├── scenario_idfs
│   │   ├── building_4136730_scenario_0.idf
│   │   ├── building_4136730_scenario_1.idf
│   │   ├── building_4136730_scenario_2.idf
│   │   ├── building_4136730_scenario_3.idf
│   │   └── building_4136730_scenario_4.idf
│   ├── scenarios
│   │   ├── scenario_params_dhw.csv
│   │   ├── scenario_params_elec.csv
│   │   ├── scenario_params_fenez.csv
│   │   ├── scenario_params_hvac.csv
│   │   └── scenario_params_vent.csv












├── calibration
│   ├── cal
│   │   ├── calibration_manager.py
│   │   │   └── Imports:
│   │   │       │   os
│   │   │       │   numpy
│   │   │           pandas
│   │   │   └── From Imports:
│   │   │       │   from typing import Dict
│   │   │       │   from typing import Any
│   │   │       │   from calibration.calibrator_random import random_calibration
│   │   │       │   from calibration.calibrator_ga import ga_calibration
│   │   │       │   from calibration.calibrator_bayes import bayes_calibration
│   │   │       │   from calibration.sensitivity import run_sensitivity_analysis
│   │   │       │   from calibration.ml_surrogate import SurrogateCalibrator
│   │   │       │   from generation.create_idfs import create_idf_files
│   │   │           from validation.validate_results import validate_data
│   │   │   └── Functions:
│   │   │       │   __init__
│   │   │       │   run_calibration
│   │   │       │   run_sensitivity
│   │   │           run_surrogate_calibration
│   │   │   └── Classes:
│   │   │           CalibrationManager
│   │   ├── calibrator_bayes.py
│   │   │   └── Imports:
│   │   │       │   random
│   │   │           pandas
│   │   │   └── From Imports:
│   │   │       │   from skopt import gp_minimize
│   │   │           from skopt.space import Real
│   │   │   └── Functions:
│   │   │       │   bayes_calibration
│   │   │       │   run_sim_and_validate
│   │   │           objective
│   │   ├── calibrator_ga.py
│   │   │   └── Imports:
│   │   │       │   random
│   │   │       │   copy
│   │   │           pandas
│   │   │   └── Functions:
│   │   │       │   ga_calibration
│   │   │       │   sample_param_set
│   │   │       │   run_sim_and_validate
│   │   │       │   tournament_select
│   │   │       │   crossover
│   │   │           mutate
│   │   ├── calibrator_random.py
│   │   │   └── Imports:
│   │   │       │   random
│   │   │           pandas
│   │   │   └── Functions:
│   │   │       │   random_calibration
│   │   │           run_sim_and_validate
│   │   ├── main_calibration.py
│   │   │   └── Imports:
│   │   │           os
│   │   │   └── From Imports:
│   │   │           from calibration.calibration_manager import CalibrationManager
│   │   │   └── Functions:
│   │   │           main
│   │   ├── ml_surrogate.py
│   │   │   └── Imports:
│   │   │       │   pandas
│   │   │           random
│   │   │   └── Functions:
│   │   │       │   sample_param_set
│   │   │       │   __init__
│   │   │       │   build_surrogate
│   │   │           optimize
│   │   │   └── Classes:
│   │   │           SurrogateCalibrator
│   │   └── sensitivity.py
│   │       └── Functions:
│   │               run_sensitivity_analysis
│   └── prepare_calibration_data.py
│       └── Imports:
│           │   os
│           │   pandas
│               numpy
│       └── Functions:
│           │   load_data
│           │   filter_numeric_parameters
│           │   create_param_set_id_column
│           │   merge_params_with_validation
│               prepare_calibration_data





















































├── output
│   ├── assigned
│   │   ├── assigned_dhw_params.csv
│   │   ├── assigned_geometry.csv
│   │   ├── assigned_hvac_building.csv
│   │   ├── assigned_hvac_zones.csv
│   │   ├── assigned_lighting.csv
│   │   ├── assigned_setzone_params.csv
│   │   ├── assigned_vent_building.csv
│   │   ├── assigned_vent_zones.csv
│   │   ├── structured_fenez_params.csv
│   │   └── Structuring_assigns.ipynb
│   ├── output_IDFs
│   │   ├── building_0.idf
│   │   ├── building_0_85344a.idf
│   │   ├── building_1.idf
│   │   └── building_1_37cb48.idf
│   ├── results
│   │   ├── master_parameters.csv
│   │   ├── master_parameters_mock.csv
│   │   ├── merged_as_is.csv
│   │   ├── merged_daily_mean.csv
│   │   ├── merged_daily_mean_mocked.csv
│   │   └── mock_merged_daily_mean.csv
│   ├── scenario_idfs
│   │   ├── building_4136730_scenario_0.idf
│   │   ├── building_4136730_scenario_1.idf
│   │   ├── building_4136730_scenario_2.idf
│   │   ├── building_4136730_scenario_3.idf
│   │   └── building_4136730_scenario_4.idf
│   ├── scenarios
│   │   ├── scenario_params_dhw.csv
│   │   ├── scenario_params_elec.csv
│   │   ├── scenario_params_fenez.csv
│   │   ├── scenario_params_hvac.csv
│   │   └── scenario_params_vent.csv
│   ├── Sim_Results
│   │   └── 2020.0
│   │       ├── simulation_bldg0.audit
│   │       ├── simulation_bldg0.bnd
│   │       ├── simulation_bldg0.csv
│   │       ............
│   │       ├── simulation_bldg1Table.htm
│   │       └── simulation_bldg1Zsz.csv
│   ├── assigned_fenez_params.csv
│   ├── master_parameters_mock.csv



